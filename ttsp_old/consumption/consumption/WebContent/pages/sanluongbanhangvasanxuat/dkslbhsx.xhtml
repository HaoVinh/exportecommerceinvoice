<?xml version="1.0" encoding="UTF-8"?>
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:p="http://primefaces.org/ui"
	xmlns:pe="http://primefaces.org/ui/extensions"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:c="http://java.sun.com/jsp/jstl/core"
	xmlns:fn="http://java.sun.com/jsp/jstl/functions"
	xmlns:h="http://java.sun.com/jsf/html" template="/pages/home.xhtml">

	<ui:define name="content">
		<div class="row">
			<div class="col-md-6">
				<h3 class="titleform">Dự kiến sản lượng bán hàng và sản xuất</h3>
			</div>
			<div class="col-md-6"
				style="height: 30px; display: flex; justify-content: flex-end; align-items: center;">
				<p:commandLink value="Xem cách tính dữ liệu"
					style="margin-top: 10px" onclick="PF('dlcachtinhsolieu').show();" />
			</div>
		</div>
		<p:separator />
		<div class="col-md-12">
			<h:form id="menuformid">
				<div class="col-md-12"
					style="padding-left: 0px !important; padding-right: 0px !important; background-color: #eeeeee;">
					<div class="row">
						<div class="col-md-12"
							style="padding-left: 0px !important; padding-right: 0px !important;">
							<div class="row">
								<div class="col-md-4" style="margin-top: 23px">
									<div class="col-md-8">
										<p:calendar value="#{theoDoiSLBH_SXBean.ngay}" size="2"
											pattern="dd/MM/yyyy" showOn="button" mask="99/99/9999"
											showButtonPanel="true" />
									</div>
									<div class="col-md-4">
										<p:commandLink styleClass="btn_printtt" update="idtbtheodoisl"
											style="margin-left:5px; margin-right:5px; "
											action="#{theoDoiSLBH_SXBean.taidulieu()}">
											<i class="fa fa-search" aria-hidden="true"></i>
											<span>Tìm</span>
										</p:commandLink>
									</div>
								</div>
								<div class="col-md-8" style="text-align: end;">
									<p:commandButton styleClass="btn_primmary" value="Xuất excel"
										icon="fa fa-file-excel-o"
										ajax="false" target="_blank"
										action="#{theoDoiSLBH_SXBean.excelSLBH()}" />
									<p:commandButton styleClass="btn_printtt" value="In"
										icon="fa fa-file-pdf-o"
										onclick="target='_blank';monitorDownload( showStatus , hideStatus)"
										action="#{theoDoiSLBH_SXBean.inSLBH()}" />

									<p:commandLink process="@this" styleClass="btn_new2"
										id="idcopy" style="margin-top:20px" update="idtbtheodoisl">
										<i class="fa fa-files-o" aria-hidden="true"></i>Copy</p:commandLink>
									<p:overlayPanel id="idfcopy" for="idcopy" hideEffect="fade"
										dismissable="false" widgetVar="panelcopy" style="width:250px;">
										<div class="col-md-12" style="margin-bottom: 20px;">
											<div class="col-md-8">
												<label>Copy qua ngày</label>
												<p:calendar value="#{theoDoiSLBH_SXBean.ngayCopy}"
													pattern="dd/MM/yyyy" showOn="button" mask="99/99/9999"
													showButtonPanel="true" />
											</div>
											<div class="col-md-4">
												<p:commandLink process="idfcopy" styleClass="btn_other"
													style="margin-top:20px" update="idtbtheodoisl"
													oncomplete="PF('panelcopy').hide()"
													action="#{theoDoiSLBH_SXBean.copy()}">Cập nhật</p:commandLink>
											</div>
										</div>
									</p:overlayPanel>

									<p:commandLink styleClass="btn_destroy" id="idcapnhatdulieu"
										immediate="true" style="margin-left:5px; margin-right:5px; ">
										<i class="fa fa-refresh" aria-hidden="true"></i>
										<span>Cập nhật dữ liệu</span>
									</p:commandLink>
									<p:overlayPanel id="idfcapnhatdulieu" for="idcapnhatdulieu"
										hideEffect="fade" dismissable="false"
										widgetVar="panelcapnhatdulieu" style="width:250px;">
										<div class="col-md-12" style="margin-bottom: 20px;">
											<div class="col-md-8">
												<label>Ngày chốt dữ liệu</label>
												<p:calendar
													value="#{theoDoiSLBH_SXBean.ngaychotcapnhatdulieu}"
													pattern="dd/MM/yyyy" showOn="button" mask="99/99/9999"
													showButtonPanel="true" />
											</div>
											<div class="col-md-4">
												<p:commandLink process="idfcapnhatdulieu"
													styleClass="btn_other" style="margin-top:20px"
													update="menuformid"
													oncomplete="PF('panelcapnhatdulieu').hide()"
													action="#{theoDoiSLBH_SXBean.capnhatdulieu()}">Cập nhật</p:commandLink>
											</div>
										</div>
									</p:overlayPanel>
									<p:splitButton value="Lưu/Cập nhật" styleClass="btn_primmarysl"
										action="#{theoDoiSLBH_SXBean.saveOrUpdate()}"
										update="messages" icon="pi pi-save">
										<p:menuitem value="Kế hoạch bán hàng"
											action="#{theoDoiSLBH_SXBean.kehoachSLBanHang()}"
											icon="pi pi-refresh" />
										<p:menuitem value="Kế hoạch sản xuất"
											action="#{theoDoiSLBH_SXBean.kehoachSLSanXuat()}"
											icon="pi pi-times" />
									</p:splitButton>
								</div>
							</div>
							<div class="row" style="margin-top: 3px;">
								<p:dataTable value="#{theoDoiSLBH_SXBean.theoDoiSLBH_SX_Datas}"
									styleClass="tablenhapsp tableright1 tbinputnopadding"
									rowIndexVar="rowe" editable="true" editMode="cell"
									id="idtbtheodoisl" rowStyleClass="strow#{item.kenhLever}"
									resizableColumns="true" var="item">
									<p:column headerText="Kênh" width="100" styleClass="hkenh">
										<h:outputText
											style="white-space: initial;#{item.duocnhap?'color:#E91E63':''}"
											value="#{item.kenh}" />
									</p:column>
									<p:column headerText="Dự kiến SL bán" styleClass="textright"
										id="iddkslban">
										<p:cellEditor rendered="#{item.kenhLever>2}">
											<f:facet name="output">
												<h:outputText value="#{item.dukienSLban}">
													<f:convertNumber locale="vi" pattern="#,##0.##" />
												</h:outputText>
											</f:facet>
											<f:facet name="input">
												<p:inputNumber styleClass="iptextright"
													value="#{item.dukienSLban}" decimalPlaces="0"
													decimalSeparator="," thousandSeparator=".">
													<p:ajax update="idtbtheodoisl" process="@this"
														listener="#{theoDoiSLBH_SXBean.ajax_soluong(1,item)}" />
												</p:inputNumber>
											</f:facet>
										</p:cellEditor>
										<h:outputText value="#{item.dukienSLban}"
											rendered="#{item.kenhLever &lt;=2}">
											<f:convertNumber locale="vi" pattern="#,##0.##" />
										</h:outputText>
									</p:column>
									<p:column headerText="Thực xuất" styleClass="textright">
										<p:cellEditor rendered="#{item.kenhLever>2}">
											<f:facet name="output">
												<h:outputText value="#{item.thucxuat}">
													<f:convertNumber locale="vi" pattern="#,##0.##" />
												</h:outputText>
											</f:facet>
											<f:facet name="input">
												<p:inputNumber styleClass="iptextright"
													value="#{item.thucxuat}" decimalPlaces="0"
													decimalSeparator="," thousandSeparator=".">
													<p:ajax update="idtbtheodoisl" process="@this"
														listener="#{theoDoiSLBH_SXBean.ajax_soluong(2,item)}" />
												</p:inputNumber>
											</f:facet>
										</p:cellEditor>
										<h:outputText value="#{item.thucxuat}"
											rendered="#{item.kenhLever &lt;=2}">
											<f:convertNumber locale="vi" pattern="#,##0.##" />
										</h:outputText>

									</p:column>
									<p:column headerText="Kế hoạch còn lại" styleClass="textright">
										<p:cellEditor rendered="#{item.kenhLever>2}">
											<f:facet name="output">
												<h:outputText value="#{item.khconlai}">
													<f:convertNumber locale="vi" pattern="#,##0.##" />
												</h:outputText>
											</f:facet>
											<f:facet name="input">
												<p:inputNumber styleClass="iptextright"
													value="#{item.khconlai}" decimalPlaces="0"
													decimalSeparator="," thousandSeparator=".">
													<p:ajax update="idtbtheodoisl" process="@this"
														listener="#{theoDoiSLBH_SXBean.ajax_soluong(3,item)}" />
												</p:inputNumber>
											</f:facet>
										</p:cellEditor>
										<h:outputText value="#{item.khconlai}"
											rendered="#{item.kenhLever &lt;=2}">
											<f:convertNumber locale="vi" pattern="#,##0.##" />
										</h:outputText>
									</p:column>
									<p:column headerText="Ước còn lại" styleClass="textright">
										<p:cellEditor rendered="#{item.kenhLever>2}">
											<f:facet name="output">
												<h:outputText value="#{item.uocconlai}">
													<f:convertNumber locale="vi" pattern="#,##0.##" />
												</h:outputText>
											</f:facet>
											<f:facet name="input">
												<p:inputNumber styleClass="iptextright"
													value="#{item.uocconlai}" decimalPlaces="0"
													decimalSeparator="," thousandSeparator=".">
													<p:ajax update="idtbtheodoisl" process="@this"
														listener="#{theoDoiSLBH_SXBean.ajax_soluong(4,item)}" />
												</p:inputNumber>
											</f:facet>
										</p:cellEditor>
										<h:outputText value="#{item.uocconlai}"
											rendered="#{item.kenhLever &lt;=2}">
											<f:convertNumber locale="vi" pattern="#,##0.##" />
										</h:outputText>
									</p:column>
									<p:column headerText="Tồn kho đầu tháng" styleClass="textright">
										<p:cellEditor
											rendered="#{(item.kenhLever>2 and item.kenh != 'GT' and item.kenh != 'MT') or item.duocnhap}">
											<f:facet name="output">
												<h:outputText value="#{item.tonkhodauthang}">
													<f:convertNumber locale="vi" pattern="#,##0.##" />
												</h:outputText>
											</f:facet>
											<f:facet name="input">
												<p:inputNumber styleClass="iptextright"
													value="#{item.tonkhodauthang}" decimalPlaces="0"
													decimalSeparator="," thousandSeparator=".">
													<p:ajax update="idtbtheodoisl" process="@this"
														listener="#{theoDoiSLBH_SXBean.ajax_soluong(5,item)}" />
												</p:inputNumber>
											</f:facet>
										</p:cellEditor>
										<h:outputText value="#{item.tonkhodauthang}"
											rendered="#{item.kenhLever &lt;=2 and item.duocnhap ==false}">
											<f:convertNumber locale="vi" pattern="#,##0.##" />
										</h:outputText>
									</p:column>
									<p:column headerText="Tồn kho cuối" styleClass="textright">
<!-- 										<p:cellEditor -->
<!-- 											rendered="#{item.kenhLever>2 and item.kenh != 'GT' and item.kenh != 'MT'}"> -->
<!-- 											<f:facet name="output"> -->
<!-- 												<h:outputText value="#{item.tonkhocuoi}"> -->
<!-- 													<f:convertNumber locale="vi" pattern="#,##0.##" /> -->
<!-- 												</h:outputText> -->
<!-- 											</f:facet> -->
<!-- 											<f:facet name="input"> -->
<!-- 												<p:inputNumber styleClass="iptextright" -->
<!-- 													value="#{item.tonkhocuoi}" decimalPlaces="0" -->
<!-- 													decimalSeparator="," thousandSeparator="."> -->
<!-- 													<p:ajax update="idtbtheodoisl" process="@this" -->
<!-- 														listener="#{theoDoiSLBH_SXBean.ajax_soluong(6,item)}" /> -->
<!-- 												</p:inputNumber> -->
<!-- 											</f:facet> -->
<!-- 										</p:cellEditor> -->
										<h:outputText value="#{item.tonkhocuoi}"
											rendered="#{item.kenh != 'GT' and item.kenh != 'MT'}">
											<f:convertNumber locale="vi" pattern="#,##0.##" />
										</h:outputText>
									</p:column>
									<p:column headerText="Kế hoạch sản xuất" styleClass="textright">
										<p:cellEditor
											rendered="#{item.kenhLever>2 and item.kenh != 'GT' and item.kenh != 'MT'}">
											<f:facet name="output">
												<h:outputText value="#{item.kehoachsx}">
													<f:convertNumber locale="vi" pattern="#,##0.##" />
												</h:outputText>
											</f:facet>
											<f:facet name="input">
												<p:inputNumber styleClass="iptextright"
													value="#{item.kehoachsx}" decimalPlaces="0"
													decimalSeparator="," thousandSeparator=".">
													<p:ajax update="idtbtheodoisl" process="@this"
														listener="#{theoDoiSLBH_SXBean.ajax_soluong(7,item)}" />
												</p:inputNumber>
											</f:facet>
										</p:cellEditor>
										<h:outputText value="#{item.kehoachsx}"
											rendered="#{item.kenhLever &lt;=2}">
											<f:convertNumber locale="vi" pattern="#,##0.##" />
										</h:outputText>
									</p:column>
									<p:column headerText="Đã sản xuất" styleClass="textright">
										<p:cellEditor
											rendered="#{item.kenhLever>2 and item.kenh != 'GT' and item.kenh != 'MT'}">
											<f:facet name="output">
												<h:outputText value="#{item.dasx}">
													<f:convertNumber locale="vi" pattern="#,##0.##" />
												</h:outputText>
											</f:facet>
											<f:facet name="input">
												<p:inputNumber styleClass="iptextright" value="#{item.dasx}"
													decimalPlaces="0" decimalSeparator=","
													thousandSeparator=".">
													<p:ajax update="idtbtheodoisl" process="@this"
														listener="#{theoDoiSLBH_SXBean.ajax_soluong(8,item)}" />
												</p:inputNumber>
											</f:facet>
										</p:cellEditor>
										<h:outputText value="#{item.dasx}"
											rendered="#{item.kenhLever &lt;=2}">
											<f:convertNumber locale="vi" pattern="#,##0.##" />
										</h:outputText>
									</p:column>
									<p:column headerText="Kế hoạch SX còn lại"
										styleClass="textright">
										<p:cellEditor
											rendered="#{item.kenhLever>2 and item.kenh != 'GT' and item.kenh != 'MT'}">
											<f:facet name="output">
												<h:outputText value="#{item.kehoachsxconlai}">
													<f:convertNumber locale="vi" pattern="#,##0.##" />
												</h:outputText>
											</f:facet>
											<f:facet name="input">
												<p:inputNumber styleClass="iptextright"
													value="#{item.kehoachsxconlai}" decimalPlaces="0"
													decimalSeparator="," thousandSeparator=".">
													<p:ajax update="idtbtheodoisl" process="@this"
														listener="#{theoDoiSLBH_SXBean.ajax_soluong(9,item)}" />
												</p:inputNumber>
											</f:facet>
										</p:cellEditor>
										<h:outputText value="#{item.kehoachsxconlai}"
											rendered="#{item.kenhLever &lt;=2}">
											<f:convertNumber locale="vi" pattern="#,##0.##" />
										</h:outputText>
									</p:column>
								</p:dataTable>
							</div>
						</div>
					</div>
				</div>
			</h:form>
		</div>
		<p:dialog modal="true" header="Kế hoạch sản lượng bán"
			widgetVar="dldukienslban" resizable="false" styleClass="dialogcommon"
			style="overflow: initial;width:100%;max-width: min-content;min-width: 800px;">
			<h:form id="idfdukienslban">
				<div class="row" style="margin-top: 10px;">
					<div class="col-md-6">
						<p:spinner value="#{theoDoiSLBH_SXBean.yearSLBan}" size="4"
							min="2015" max="2050" thousandSeparator="">
							<p:ajax process="@this"
								listener="#{theoDoiSLBH_SXBean.kehoachSLBanHang()}"
								update="idfdukienslban" />
						</p:spinner>
					</div>
					<div class="col-md-6" style="text-align: end;">
						<p:commandLink process="@this" styleClass="btn_primmary"
							action="#{theoDoiSLBH_SXBean.saveOrUpdate_KHSLBanHang()}">
							<i class="fa fa-files-o" aria-hidden="true"></i>Lưu/Cập nhật</p:commandLink>
					</div>
				</div>
				<div class="row" style="margin-top: 10px;">

					<p:dataTable value="#{theoDoiSLBH_SXBean.keHoachSL_BanHangs}"
						styleClass="tablenhapsp tableright1 tbinputnopadding"
						style="width:100%;" id="idtbkhslban" rowIndexVar="rowe"
						editable="true" editMode="cell"
						rowStyleClass="strow#{item.kenhLever}" resizableColumns="true"
						var="item">
						<p:column headerText="Kênh" width="100" styleClass="hkenh">
							<h:outputText style="white-space: initial;" value="#{item.kenh}" />
						</p:column>
						<p:column headerText="Tháng 1" styleClass="textright">
							<p:cellEditor rendered="#{item.kenhLever>2}">
								<f:facet name="output">
									<h:outputText value="#{item.sl_1}">
										<f:convertNumber locale="vi" pattern="#,##0.##" />
									</h:outputText>
								</f:facet>
								<f:facet name="input">
									<p:inputNumber styleClass="iptextright" value="#{item.sl_1}"
										decimalPlaces="0" decimalSeparator="," thousandSeparator=".">
										<p:ajax update="idtbkhslban" process="@this"
											listener="#{theoDoiSLBH_SXBean.ajax_kehoachSLBanHang(1,item)}" />
									</p:inputNumber>
								</f:facet>
							</p:cellEditor>
							<h:outputText value="#{item.sl_1}"
								rendered="#{item.kenhLever &lt;=2}">
								<f:convertNumber locale="vi" pattern="#,##0.##" />
							</h:outputText>
						</p:column>
						<p:column headerText="Tháng 2" styleClass="textright">
							<p:cellEditor rendered="#{item.kenhLever>2}">
								<f:facet name="output">
									<h:outputText value="#{item.sl_2}">
										<f:convertNumber locale="vi" pattern="#,##0.##" />
									</h:outputText>
								</f:facet>
								<f:facet name="input">
									<p:inputNumber styleClass="iptextright" value="#{item.sl_2}"
										decimalPlaces="0" decimalSeparator="," thousandSeparator=".">
										<p:ajax update="idtbkhslban" process="@this"
											listener="#{theoDoiSLBH_SXBean.ajax_kehoachSLBanHang(2,item)}" />
									</p:inputNumber>
								</f:facet>
							</p:cellEditor>
							<h:outputText value="#{item.sl_2}"
								rendered="#{item.kenhLever &lt;=2}">
								<f:convertNumber locale="vi" pattern="#,##0.##" />
							</h:outputText>
						</p:column>
						<p:column headerText="Tháng 3" styleClass="textright">
							<p:cellEditor rendered="#{item.kenhLever>2}">
								<f:facet name="output">
									<h:outputText value="#{item.sl_3}">
										<f:convertNumber locale="vi" pattern="#,##0.##" />
									</h:outputText>
								</f:facet>
								<f:facet name="input">
									<p:inputNumber styleClass="iptextright" value="#{item.sl_3}"
										decimalPlaces="0" decimalSeparator="," thousandSeparator=".">
										<p:ajax update="idtbkhslban" process="@this"
											listener="#{theoDoiSLBH_SXBean.ajax_kehoachSLBanHang(3,item)}" />
									</p:inputNumber>
								</f:facet>
							</p:cellEditor>
							<h:outputText value="#{item.sl_3}"
								rendered="#{item.kenhLever &lt;=2}">
								<f:convertNumber locale="vi" pattern="#,##0.##" />
							</h:outputText>
						</p:column>
						<p:column headerText="Tháng 4" styleClass="textright">
							<p:cellEditor rendered="#{item.kenhLever>2}">
								<f:facet name="output">
									<h:outputText value="#{item.sl_4}">
										<f:convertNumber locale="vi" pattern="#,##0.##" />
									</h:outputText>
								</f:facet>
								<f:facet name="input">
									<p:inputNumber styleClass="iptextright" value="#{item.sl_4}"
										decimalPlaces="0" decimalSeparator="," thousandSeparator=".">
										<p:ajax update="idtbkhslban" process="@this"
											listener="#{theoDoiSLBH_SXBean.ajax_kehoachSLBanHang(4,item)}" />
									</p:inputNumber>
								</f:facet>
							</p:cellEditor>
							<h:outputText value="#{item.sl_4}"
								rendered="#{item.kenhLever &lt;=2}">
								<f:convertNumber locale="vi" pattern="#,##0.##" />
							</h:outputText>
						</p:column>
						<p:column headerText="Tháng 5" styleClass="textright">
							<p:cellEditor rendered="#{item.kenhLever>2}">
								<f:facet name="output">
									<h:outputText value="#{item.sl_5}">
										<f:convertNumber locale="vi" pattern="#,##0.##" />
									</h:outputText>
								</f:facet>
								<f:facet name="input">
									<p:inputNumber styleClass="iptextright" value="#{item.sl_5}"
										decimalPlaces="0" decimalSeparator="," thousandSeparator=".">
										<p:ajax update="idtbkhslban" process="@this"
											listener="#{theoDoiSLBH_SXBean.ajax_kehoachSLBanHang(5,item)}" />
									</p:inputNumber>
								</f:facet>
							</p:cellEditor>
							<h:outputText value="#{item.sl_5}"
								rendered="#{item.kenhLever &lt;=2}">
								<f:convertNumber locale="vi" pattern="#,##0.##" />
							</h:outputText>
						</p:column>
						<p:column headerText="Tháng 6" styleClass="textright">
							<p:cellEditor rendered="#{item.kenhLever>2}">
								<f:facet name="output">
									<h:outputText value="#{item.sl_6}">
										<f:convertNumber locale="vi" pattern="#,##0.##" />
									</h:outputText>
								</f:facet>
								<f:facet name="input">
									<p:inputNumber styleClass="iptextright" value="#{item.sl_6}"
										decimalPlaces="0" decimalSeparator="," thousandSeparator=".">
										<p:ajax update="idtbkhslban" process="@this"
											listener="#{theoDoiSLBH_SXBean.ajax_kehoachSLBanHang(6,item)}" />
									</p:inputNumber>
								</f:facet>
							</p:cellEditor>
							<h:outputText value="#{item.sl_6}"
								rendered="#{item.kenhLever &lt;=2}">
								<f:convertNumber locale="vi" pattern="#,##0.##" />
							</h:outputText>
						</p:column>
						<p:column headerText="Tháng 7" styleClass="textright">
							<p:cellEditor rendered="#{item.kenhLever>2}">
								<f:facet name="output">
									<h:outputText value="#{item.sl_7}">
										<f:convertNumber locale="vi" pattern="#,##0.##" />
									</h:outputText>
								</f:facet>
								<f:facet name="input">
									<p:inputNumber styleClass="iptextright" value="#{item.sl_7}"
										decimalPlaces="0" decimalSeparator="," thousandSeparator=".">
										<p:ajax update="idtbkhslban" process="@this"
											listener="#{theoDoiSLBH_SXBean.ajax_kehoachSLBanHang(7,item)}" />
									</p:inputNumber>
								</f:facet>
							</p:cellEditor>
							<h:outputText value="#{item.sl_7}"
								rendered="#{item.kenhLever &lt;=2}">
								<f:convertNumber locale="vi" pattern="#,##0.##" />
							</h:outputText>
						</p:column>
						<p:column headerText="Tháng 8" styleClass="textright">
							<p:cellEditor rendered="#{item.kenhLever>2}">
								<f:facet name="output">
									<h:outputText value="#{item.sl_8}">
										<f:convertNumber locale="vi" pattern="#,##0.##" />
									</h:outputText>
								</f:facet>
								<f:facet name="input">
									<p:inputNumber styleClass="iptextright" value="#{item.sl_8}"
										decimalPlaces="0" decimalSeparator="," thousandSeparator=".">
										<p:ajax update="idtbkhslban" process="@this"
											listener="#{theoDoiSLBH_SXBean.ajax_kehoachSLBanHang(8,item)}" />
									</p:inputNumber>
								</f:facet>
							</p:cellEditor>
							<h:outputText value="#{item.sl_8}"
								rendered="#{item.kenhLever &lt;=2}">
								<f:convertNumber locale="vi" pattern="#,##0.##" />
							</h:outputText>
						</p:column>
						<p:column headerText="Tháng 9" styleClass="textright">
							<p:cellEditor rendered="#{item.kenhLever>2}">
								<f:facet name="output">
									<h:outputText value="#{item.sl_9}">
										<f:convertNumber locale="vi" pattern="#,##0.##" />
									</h:outputText>
								</f:facet>
								<f:facet name="input">
									<p:inputNumber styleClass="iptextright" value="#{item.sl_9}"
										decimalPlaces="0" decimalSeparator="," thousandSeparator=".">
										<p:ajax update="idtbkhslban" process="@this"
											listener="#{theoDoiSLBH_SXBean.ajax_kehoachSLBanHang(9,item)}" />
									</p:inputNumber>
								</f:facet>
							</p:cellEditor>
							<h:outputText value="#{item.sl_9}"
								rendered="#{item.kenhLever &lt;=2}">
								<f:convertNumber locale="vi" pattern="#,##0.##" />
							</h:outputText>
						</p:column>
						<p:column headerText="Tháng 10" styleClass="textright">
							<p:cellEditor rendered="#{item.kenhLever>2}">
								<f:facet name="output">
									<h:outputText value="#{item.sl_10}">
										<f:convertNumber locale="vi" pattern="#,##0.##" />
									</h:outputText>
								</f:facet>
								<f:facet name="input">
									<p:inputNumber styleClass="iptextright" value="#{item.sl_10}"
										decimalPlaces="0" decimalSeparator="," thousandSeparator=".">
										<p:ajax update="idtbkhslban" process="@this"
											listener="#{theoDoiSLBH_SXBean.ajax_kehoachSLBanHang(10,item)}" />
									</p:inputNumber>
								</f:facet>
							</p:cellEditor>
							<h:outputText value="#{item.sl_10}"
								rendered="#{item.kenhLever &lt;=2}">
								<f:convertNumber locale="vi" pattern="#,##0.##" />
							</h:outputText>
						</p:column>
						<p:column headerText="Tháng 11" styleClass="textright">
							<p:cellEditor rendered="#{item.kenhLever>2}">
								<f:facet name="output">
									<h:outputText value="#{item.sl_11}">
										<f:convertNumber locale="vi" pattern="#,##0.##" />
									</h:outputText>
								</f:facet>
								<f:facet name="input">
									<p:inputNumber styleClass="iptextright" value="#{item.sl_11}"
										decimalPlaces="0" decimalSeparator="," thousandSeparator=".">
										<p:ajax update="idtbkhslban" process="@this"
											listener="#{theoDoiSLBH_SXBean.ajax_kehoachSLBanHang(11,item)}" />
									</p:inputNumber>
								</f:facet>
							</p:cellEditor>
							<h:outputText value="#{item.sl_11}"
								rendered="#{item.kenhLever &lt;=2}">
								<f:convertNumber locale="vi" pattern="#,##0.##" />
							</h:outputText>
						</p:column>
						<p:column headerText="Tháng 12" styleClass="textright">
							<p:cellEditor rendered="#{item.kenhLever>2}">
								<f:facet name="output">
									<h:outputText value="#{item.sl_12}">
										<f:convertNumber locale="vi" pattern="#,##0.##" />
									</h:outputText>
								</f:facet>
								<f:facet name="input">
									<p:inputNumber styleClass="iptextright" value="#{item.sl_12}"
										decimalPlaces="0" decimalSeparator="," thousandSeparator=".">
										<p:ajax update="idtbkhslban" process="@this"
											listener="#{theoDoiSLBH_SXBean.ajax_kehoachSLBanHang(12,item)}" />
									</p:inputNumber>
								</f:facet>
							</p:cellEditor>
							<h:outputText value="#{item.sl_12}"
								rendered="#{item.kenhLever &lt;=2}">
								<f:convertNumber locale="vi" pattern="#,##0.##" />
							</h:outputText>
						</p:column>
					</p:dataTable>
				</div>
			</h:form>
		</p:dialog>

		<p:dialog modal="true" header="Kế hoạch sản xuất"
			widgetVar="dldukienslsanxuat" resizable="false"
			styleClass="dialogcommon"
			style="overflow: initial;width:100%;max-width: min-content;min-width: 800px;">
			<h:form id="idfdukienslsanxuat">
				<div class="row" style="margin-top: 10px;">
					<div class="col-md-6">
						<p:spinner value="#{theoDoiSLBH_SXBean.yearSLSanXuat}" size="4"
							min="2015" max="2050" thousandSeparator="">
							<p:ajax process="@this"
								listener="#{theoDoiSLBH_SXBean.kehoachSLSanXuat()}"
								update="idfdukienslsanxuat" />
						</p:spinner>
					</div>
					<div class="col-md-6" style="text-align: end;">
						<p:commandLink process="@this" styleClass="btn_primmary"
							action="#{theoDoiSLBH_SXBean.saveOrUpdate_KHSLSanXuat()}">
							<i class="fa fa-files-o" aria-hidden="true"></i>Lưu/Cập nhật</p:commandLink>
					</div>
				</div>
				<div class="row" style="margin-top: 10px;">
					<p:dataTable value="#{theoDoiSLBH_SXBean.keHoachSL_SanXuats}"
						styleClass="tablenhapsp tableright1 tbinputnopadding"
						style="width:100%;" id="idtbkhslsanxuat" rowIndexVar="rowe"
						editable="true" editMode="cell"
						rowStyleClass="strow#{item.kenhLever}" resizableColumns="true"
						var="item">
						<p:column headerText="Kênh" width="100" styleClass="hkenh">
							<h:outputText style="white-space: initial;" value="#{item.kenh}" />
						</p:column>
						<p:column headerText="Tháng 1" styleClass="textright">
							<p:cellEditor rendered="#{item.kenhLever>2}">
								<f:facet name="output">
									<h:outputText value="#{item.sl_1}">
										<f:convertNumber locale="vi" pattern="#,##0.##" />
									</h:outputText>
								</f:facet>
								<f:facet name="input">
									<p:inputNumber styleClass="iptextright" value="#{item.sl_1}"
										decimalPlaces="0" decimalSeparator="," thousandSeparator=".">
										<p:ajax update="idtbkhslsanxuat" process="@this"
											listener="#{theoDoiSLBH_SXBean.ajax_kehoachSLSanXuat(1,item)}" />
									</p:inputNumber>
								</f:facet>
							</p:cellEditor>
							<h:outputText value="#{item.sl_1}"
								rendered="#{item.kenhLever &lt;=2}">
								<f:convertNumber locale="vi" pattern="#,##0.##" />
							</h:outputText>
						</p:column>
						<p:column headerText="Tháng 2" styleClass="textright">
							<p:cellEditor rendered="#{item.kenhLever>2}">
								<f:facet name="output">
									<h:outputText value="#{item.sl_2}">
										<f:convertNumber locale="vi" pattern="#,##0.##" />
									</h:outputText>
								</f:facet>
								<f:facet name="input">
									<p:inputNumber styleClass="iptextright" value="#{item.sl_2}"
										decimalPlaces="0" decimalSeparator="," thousandSeparator=".">
										<p:ajax update="idtbkhslsanxuat" process="@this"
											listener="#{theoDoiSLBH_SXBean.ajax_kehoachSLSanXuat(2,item)}" />
									</p:inputNumber>
								</f:facet>
							</p:cellEditor>
							<h:outputText value="#{item.sl_2}"
								rendered="#{item.kenhLever &lt;=2}">
								<f:convertNumber locale="vi" pattern="#,##0.##" />
							</h:outputText>
						</p:column>
						<p:column headerText="Tháng 3" styleClass="textright">
							<p:cellEditor rendered="#{item.kenhLever>2}">
								<f:facet name="output">
									<h:outputText value="#{item.sl_3}">
										<f:convertNumber locale="vi" pattern="#,##0.##" />
									</h:outputText>
								</f:facet>
								<f:facet name="input">
									<p:inputNumber styleClass="iptextright" value="#{item.sl_3}"
										decimalPlaces="0" decimalSeparator="," thousandSeparator=".">
										<p:ajax update="idtbkhslsanxuat" process="@this"
											listener="#{theoDoiSLBH_SXBean.ajax_kehoachSLSanXuat(3,item)}" />
									</p:inputNumber>
								</f:facet>
							</p:cellEditor>
							<h:outputText value="#{item.sl_3}"
								rendered="#{item.kenhLever &lt;=2}">
								<f:convertNumber locale="vi" pattern="#,##0.##" />
							</h:outputText>
						</p:column>
						<p:column headerText="Tháng 4" styleClass="textright">
							<p:cellEditor rendered="#{item.kenhLever>2}">
								<f:facet name="output">
									<h:outputText value="#{item.sl_4}">
										<f:convertNumber locale="vi" pattern="#,##0.##" />
									</h:outputText>
								</f:facet>
								<f:facet name="input">
									<p:inputNumber styleClass="iptextright" value="#{item.sl_4}"
										decimalPlaces="0" decimalSeparator="," thousandSeparator=".">
										<p:ajax update="idtbkhslsanxuat" process="@this"
											listener="#{theoDoiSLBH_SXBean.ajax_kehoachSLSanXuat(4,item)}" />
									</p:inputNumber>
								</f:facet>
							</p:cellEditor>
							<h:outputText value="#{item.sl_4}"
								rendered="#{item.kenhLever &lt;=2}">
								<f:convertNumber locale="vi" pattern="#,##0.##" />
							</h:outputText>
						</p:column>
						<p:column headerText="Tháng 5" styleClass="textright">
							<p:cellEditor rendered="#{item.kenhLever>2}">
								<f:facet name="output">
									<h:outputText value="#{item.sl_5}">
										<f:convertNumber locale="vi" pattern="#,##0.##" />
									</h:outputText>
								</f:facet>
								<f:facet name="input">
									<p:inputNumber styleClass="iptextright" value="#{item.sl_5}"
										decimalPlaces="0" decimalSeparator="," thousandSeparator=".">
										<p:ajax update="idtbkhslsanxuat" process="@this"
											listener="#{theoDoiSLBH_SXBean.ajax_kehoachSLSanXuat(5,item)}" />
									</p:inputNumber>
								</f:facet>
							</p:cellEditor>
							<h:outputText value="#{item.sl_5}"
								rendered="#{item.kenhLever &lt;=2}">
								<f:convertNumber locale="vi" pattern="#,##0.##" />
							</h:outputText>
						</p:column>
						<p:column headerText="Tháng 6" styleClass="textright">
							<p:cellEditor rendered="#{item.kenhLever>2}">
								<f:facet name="output">
									<h:outputText value="#{item.sl_6}">
										<f:convertNumber locale="vi" pattern="#,##0.##" />
									</h:outputText>
								</f:facet>
								<f:facet name="input">
									<p:inputNumber styleClass="iptextright" value="#{item.sl_6}"
										decimalPlaces="0" decimalSeparator="," thousandSeparator=".">
										<p:ajax update="idtbkhslsanxuat" process="@this"
											listener="#{theoDoiSLBH_SXBean.ajax_kehoachSLSanXuat(6,item)}" />
									</p:inputNumber>
								</f:facet>
							</p:cellEditor>
							<h:outputText value="#{item.sl_6}"
								rendered="#{item.kenhLever &lt;=2}">
								<f:convertNumber locale="vi" pattern="#,##0.##" />
							</h:outputText>
						</p:column>
						<p:column headerText="Tháng 7" styleClass="textright">
							<p:cellEditor rendered="#{item.kenhLever>2}">
								<f:facet name="output">
									<h:outputText value="#{item.sl_7}">
										<f:convertNumber locale="vi" pattern="#,##0.##" />
									</h:outputText>
								</f:facet>
								<f:facet name="input">
									<p:inputNumber styleClass="iptextright" value="#{item.sl_7}"
										decimalPlaces="0" decimalSeparator="," thousandSeparator=".">
										<p:ajax update="idtbkhslsanxuat" process="@this"
											listener="#{theoDoiSLBH_SXBean.ajax_kehoachSLSanXuat(7,item)}" />
									</p:inputNumber>
								</f:facet>
							</p:cellEditor>
							<h:outputText value="#{item.sl_7}"
								rendered="#{item.kenhLever &lt;=2}">
								<f:convertNumber locale="vi" pattern="#,##0.##" />
							</h:outputText>
						</p:column>
						<p:column headerText="Tháng 8" styleClass="textright">
							<p:cellEditor rendered="#{item.kenhLever>2}">
								<f:facet name="output">
									<h:outputText value="#{item.sl_8}">
										<f:convertNumber locale="vi" pattern="#,##0.##" />
									</h:outputText>
								</f:facet>
								<f:facet name="input">
									<p:inputNumber styleClass="iptextright" value="#{item.sl_8}"
										decimalPlaces="0" decimalSeparator="," thousandSeparator=".">
										<p:ajax update="idtbkhslsanxuat" process="@this"
											listener="#{theoDoiSLBH_SXBean.ajax_kehoachSLSanXuat(8,item)}" />
									</p:inputNumber>
								</f:facet>
							</p:cellEditor>
							<h:outputText value="#{item.sl_8}"
								rendered="#{item.kenhLever &lt;=2}">
								<f:convertNumber locale="vi" pattern="#,##0.##" />
							</h:outputText>
						</p:column>
						<p:column headerText="Tháng 9" styleClass="textright">
							<p:cellEditor rendered="#{item.kenhLever>2}">
								<f:facet name="output">
									<h:outputText value="#{item.sl_9}">
										<f:convertNumber locale="vi" pattern="#,##0.##" />
									</h:outputText>
								</f:facet>
								<f:facet name="input">
									<p:inputNumber styleClass="iptextright" value="#{item.sl_9}"
										decimalPlaces="0" decimalSeparator="," thousandSeparator=".">
										<p:ajax update="idtbkhslsanxuat" process="@this"
											listener="#{theoDoiSLBH_SXBean.ajax_kehoachSLSanXuat(9,item)}" />
									</p:inputNumber>
								</f:facet>
							</p:cellEditor>
							<h:outputText value="#{item.sl_9}"
								rendered="#{item.kenhLever &lt;=2}">
								<f:convertNumber locale="vi" pattern="#,##0.##" />
							</h:outputText>
						</p:column>
						<p:column headerText="Tháng 10" styleClass="textright">
							<p:cellEditor rendered="#{item.kenhLever>2}">
								<f:facet name="output">
									<h:outputText value="#{item.sl_10}">
										<f:convertNumber locale="vi" pattern="#,##0.##" />
									</h:outputText>
								</f:facet>
								<f:facet name="input">
									<p:inputNumber styleClass="iptextright" value="#{item.sl_10}"
										decimalPlaces="0" decimalSeparator="," thousandSeparator=".">
										<p:ajax update="idtbkhslsanxuat" process="@this"
											listener="#{theoDoiSLBH_SXBean.ajax_kehoachSLSanXuat(10,item)}" />
									</p:inputNumber>
								</f:facet>
							</p:cellEditor>
							<h:outputText value="#{item.sl_10}"
								rendered="#{item.kenhLever &lt;=2}">
								<f:convertNumber locale="vi" pattern="#,##0.##" />
							</h:outputText>
						</p:column>
						<p:column headerText="Tháng 11" styleClass="textright">
							<p:cellEditor rendered="#{item.kenhLever>2}">
								<f:facet name="output">
									<h:outputText value="#{item.sl_11}">
										<f:convertNumber locale="vi" pattern="#,##0.##" />
									</h:outputText>
								</f:facet>
								<f:facet name="input">
									<p:inputNumber styleClass="iptextright" value="#{item.sl_11}"
										decimalPlaces="0" decimalSeparator="," thousandSeparator=".">
										<p:ajax update="idtbkhslsanxuat" process="@this"
											listener="#{theoDoiSLBH_SXBean.ajax_kehoachSLSanXuat(11,item)}" />
									</p:inputNumber>
								</f:facet>
							</p:cellEditor>
							<h:outputText value="#{item.sl_11}"
								rendered="#{item.kenhLever &lt;=2}">
								<f:convertNumber locale="vi" pattern="#,##0.##" />
							</h:outputText>
						</p:column>
						<p:column headerText="Tháng 12" styleClass="textright">
							<p:cellEditor rendered="#{item.kenhLever>2}">
								<f:facet name="output">
									<h:outputText value="#{item.sl_12}">
										<f:convertNumber locale="vi" pattern="#,##0.##" />
									</h:outputText>
								</f:facet>
								<f:facet name="input">
									<p:inputNumber styleClass="iptextright" value="#{item.sl_12}"
										decimalPlaces="0" decimalSeparator="," thousandSeparator=".">
										<p:ajax update="idtbkhslsanxuat" process="@this"
											listener="#{theoDoiSLBH_SXBean.ajax_kehoachSLSanXuat(12,item)}" />
									</p:inputNumber>
								</f:facet>
							</p:cellEditor>
							<h:outputText value="#{item.sl_12}"
								rendered="#{item.kenhLever &lt;=2}">
								<f:convertNumber locale="vi" pattern="#,##0.##" />
							</h:outputText>
						</p:column>
					</p:dataTable>
				</div>
			</h:form>
		</p:dialog>
		<p:dialog header="Cách tính số liệu" styleClass="dialogcommon"
			resizable="false"
			style="overflow: initial;width:100%;max-width: min-content;min-width: 600px;"
			closeOnEscape="true" widgetVar="dlcachtinhsolieu">
			<p:panelGrid columns="1">
				<p:outputLabel
					value="1. Cột 'Dự kiến SL bán' được lấy từ bảng cài đặt kế hoạch bán hàng." />
				<p:outputPanel>
					<p:outputLabel
						value="2. Cột 'Thực xuất' được tính bằng số lượng thực xuất trong chương trình TTSP (24.Lấy số liệu BC tổng hợp) có tách combo và cụ thể được phân nhóm như sau:." />
					<p:outputLabel style="margin-left:20px"
						value="- Dữ liệu nhóm hàng (BỘT GIẶT, NTRL) được phân loại theo loại sản phẩm." />
					<p:outputLabel style="margin-left:20px"
						value="- Kênh 'KÊNH GT' với nhóm khách hàng 'KÊNH GT'." />
					<br />
					<p:outputLabel style="margin-left:20px"
						value="- Kênh  'KÊNH MT' gồm:" />
					<p:outputLabel style="margin-left:40px"
						value="* Nhóm khách hàng 'KÊNH SIÊU THỊ' có mã xuất nhập ('E',')','5','%')." />
					<p:outputLabel style="margin-left:40px"
						value="* Nhóm khách hàng 'KÊNH ONLINE', 'KÊNH HORECA'." />
					<br />
					<p:outputLabel style="margin-left:20px"
						value="- Kênh  'KÊNH MT-OB' với nhóm khách hàng 'KÊNH SIÊU THỊ' có mã xuất nhập ('1', '(', '^')." />
					<br />
					<p:outputLabel style="margin-left:20px"
						value="- Kênh 'KÊNH XUẤT KHẨU' với kênh khách hàng 'KÊNH XUẤT KHẨU'." />
				</p:outputPanel>
				<p:outputLabel
					value="3. Cột 'Kế hoạch còn lại' được tính bằng cột 'Dự kiến SL bán' - 'Thực xuất'." />
				<p:outputLabel
					value="4. Cột 'Ước còn lại' được tính bằng cột 'Dự kiến SL bán' - 'Thực xuất'." />
				<p:outputPanel>
					<p:outputLabel
						value="5. Cột 'Tồn kho đầu tháng' lấy số liệu tồn đầu tháng và được phân nhóm như sau:" />
					<p:outputLabel style="margin-left:20px"
						value="- Dữ liệu nhóm hàng (BỘT GIẶT, NTRL) được phân loại theo loại sản phẩm." />
					<p:outputLabel style="margin-left:20px"
						value="- Dữ kênh bán hàng (LIX, XK, KHÁC) được phân loại theo sản phẩm xuất khẩu, nhãn hàng (LIX, KHÁC) không tính nhãn 'UL'." />
				</p:outputPanel>
				<p:outputLabel
					value="6. Cột 'Tồn kho cuối' được tính bằng 'Tồn kho đầu tháng' + 'Đã sản xuất' - 'Thực xuất'." />
				<p:outputLabel
					value="7. Cột 'Kế hoạch sản xuất' được lấy từ bảng cài đặt kế hoạch sản xuất." />

				<p:outputPanel>
					<p:outputLabel
						value="8. Cột 'Đã sản xuất' được lấy từ bản nhập sản phẩm với mã nhập xuất 'S', mã khách hàng 'N' (bỏ mã sản phẩm 'BNI') và được phân nhóm như sau:" />
					<p:outputLabel style="margin-left:20px"
						value="- Dữ liệu nhóm hàng (BỘT GIẶT, NTRL) được phân loại theo loại sản phẩm." />
					<p:outputLabel style="margin-left:20px"
						value="- Dữ kênh bán hàng (LIX, XK, KHÁC) được phân loại theo sản phẩm xuất khẩu, nhãn hàng (LIX, KHÁC) không tính nhãn 'UL'. " />
				</p:outputPanel>
				<p:outputLabel
					value="9. Cột 'Kế hoạch SX còn lại' được tính bằng 'Kế hoạch sản xuất' - 'Đã sản xuất'." />
			</p:panelGrid>
		</p:dialog>
	</ui:define>
</ui:composition>