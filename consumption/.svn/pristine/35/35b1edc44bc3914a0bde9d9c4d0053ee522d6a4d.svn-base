<?xml version="1.0" encoding="UTF-8"?>
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:p="http://primefaces.org/ui"
	xmlns:pe="http://primefaces.org/ui/extensions"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:c="http://java.sun.com/jsp/jstl/core"
	xmlns:fn="http://java.sun.com/jsp/jstl/functions"
	xmlns:h="http://java.sun.com/jsf/html" template="/pages/home.xhtml">
	<style>
a.disabled {
	pointer-events: none;
	cursor: default;
	color: gray;
}
</style>
	<ui:define name="content">
		<h3 class="titleform">Đối chiếu</h3>
		<p:separator />
		<div class="col-md-12">
			<h:form id="menuformid">


				<p:tabView id="tabview1" styleClass="clearfix label12 tabview_lix">
					<p:tab id="tab1" title="Danh sách hóa đơn cấp 2">
						<div class="col-md-12"
							style="padding-left: 0px !important; padding-right: 0px !important; background-color: #eeeeee; padding-top: 15px; padding-bottom: 15px;">
							<p:fieldset id="searchform"
								style="margin-bottom:10px;background:#3c8dbc">
								<div class="row">
									<div class="ui-g">
										<div class="ui-md-6 ui-sm-12 ">
											<div class="ui-g">
												<div class="ui-md-8 ui-sm-12 ">
													<div class="nhapdlg">
														<span class="fa fa-search" />
														<p:remoteCommand name="searchEnter"
															actionListener="#{invoiceBean.search()}" update="tablesp" />
														<p:inputText
															placeholder="Tìm theo số chứng từ, khách hàng, số xe, người tạo, sản phẩm,.."
															id="inputsearch" style="width:100%;"
															value="#{invoiceBean.stextStr}"
															onkeypress="if (event.keyCode === 13) { searchEnter(); return false; }">
														</p:inputText>

													</div>

												</div>
												<div class="ui-md-4 ui-sm-12 ">
													<p:commandLink id="idorder"
														styleClass="btn_primmary text-ellipsis" immediate="true"
														title="Lọc nâng cao"
														style="margin-left:5px; margin-right:0px;height:28px !important;line-height:28px !important;">
														<i class="fa fa-search" aria-hidden="true"></i>
														<span>Lọc nâng cao</span>
													</p:commandLink>
												</div>
											</div>
										</div>

									</div>
								</div>
								<p:overlayPanel id="imagePanel" for="idorder" hideEffect="fade"
									dismissable="false" widgetVar="panelsearch"
									style="width:500px;">
									<div class="col-md-12"
										style="border: 1px solid #ccc; border-radius: 6px; margin-bottom: 5px !important; padding-bottom: 5px !important;">
										<div class="col-md-12"
											style="padding-top: 10px !important; padding-left: 0px !important; padding-right: 0px !important;">
											<div class="row">
												<div class="col-md-6"
													style="padding-left: 0px !important; padding-right: 5px !important;">
													<label>Từ ngày</label>
													<p:calendar value="#{invoiceBean.fromDateSearch}"
														pattern="dd/MM/yyyy" showOn="button" mask="99/99/9999"
														showButtonPanel="true" />
												</div>
												<div class="col-md-6"
													style="padding-left: 5px !important; padding-right: 0px !important;">
													<label>Đến ngày</label>
													<p:calendar value="#{invoiceBean.toDateSearch}"
														pattern="dd/MM/yyyy" showOn="button" mask="99/99/9999"
														showButtonPanel="true" />
												</div>
												<div class="col-md-6"
													style="padding-left: 5px !important; padding-right: 0px !important;">
													<label>Số chứng từ</label>
													<p:inputText value="#{invoiceBean.voucherCodeSearch}"
														style="width:100%" />
												</div>

											</div>
										</div>
									</div>
									<div class="col-md-12"
										style="padding-left: 0px !important; padding-right: 0px !important; margin-bottom: 5px;">
										<div class="pull-right">
											<p:commandButton value="Lọc" process="searchform"
												icon="ui-icon-search" oncomplete="PF('panelsearch').hide()"
												actionListener="#{invoiceBean.search()}" update="tablesp" />
										</div>
									</div>
								</p:overlayPanel>
							</p:fieldset>
							<div class="col-md-12" style="margin-top: 3px;">
								<p:dataTable value="#{doiChieuBean.hoaDonC2}"
									paginatorPosition="bottom"
									styleClass="tablenhapsp1 tableright1" paginator="true"
									rowKey="#{item.id}" id="tablesp" style="width:100%;" rows="10"
									rowsPerPageTemplate="10,50,100,200" selectionMode="single"
									selection="#{doiChieuBean.selectedhoaDon}"
									resizableColumns="true" var="item">
									<p:ajax event="rowSelect"
										listener="#{invoiceBean.showEditInvoice}"
										update=":messages, menuformid:tabview1:tablect, " />

									<p:column headerText="ID" width="40" toggleable="false">
										<h:outputText value="#{item.id}" />
									</p:column>
									<p:column headerText="Số chứng từ" width="80"
										style="text-align:center">
										<h:outputText value="#{item.voucher_code2}" />
									</p:column>


								</p:dataTable>
								<p:dataTable value="#{doiChieuBean.hoaDonChiTiets}"
									paginatorPosition="bottom" rowsPerPageTemplate="90,180,250"
									paginator="true" rowKey="#{item.id}" style="width:100%;"
									styleClass="tablenhapsp tableright0"
									selection="#{doiChieuBean.selectedHoaDonChiTiet}"
									scrollable="true" selectionMode="single" id="tablect"
									scrollHeight="370" widgetVar="tablect" expandedRow="false"
									var="item">
									<p:ajax event="rowDblselect"
										listener="#{invoiceBean.showEditInvoiceDetail()}" />
									<p:ajax event="rowSelect" update="" />
									<p:column headerText="ID" width="50">
										<h:outputText value="#{item.id}" />
									</p:column>
									<p:column headerText="Mã SP" width="40" styleClass="fixtoggel">
										<h:outputText value="#{item.productdh_code}" />
									</p:column>
									<p:column headerText="Sản phẩm" styleClass="fixtoggel"
										width="250">
										<h:outputText style="white-space: initial;"
											value="#{item.product}" />
									</p:column>
									<p:column headerText="Số lượng" width="40"
										styleClass="textright">
										<h:outputText value="#{item.quantity}">
											<f:convertNumber locale="vi" pattern="###,###,##0.##" />
										</h:outputText>
									</p:column>
									<p:column headerText="Thực xuất" width="40"
										styleClass="textright">
										<h:outputText id="realExport"
											style="color:#ed5c6a;font-weight: bold;"
											value="#{item.real_quantity}">
											<f:convertNumber locale="vi" pattern="###,###,##0.##" />
										</h:outputText>
									</p:column>

									<p:column headerText="Số tiền" width="60"
										styleClass="textright">
										<h:outputText value="#{item.total}" style="font-weight: bold;">
											<f:convertNumber locale="vi" pattern="###,###,##0.##" />
										</h:outputText>
									</p:column>





								</p:dataTable>
							</div>
						</div>

					</p:tab>
					<p:tab id="tab2" title="Nhập liệu">
						<h:panelGroup id="tab2real" styleClass="clearfix"
							style="background-color: #eeeeee;width: 100%;height: auto;padding-top: 13px;padding-right: 10px;display: inline-block;padding-left: 10px;padding-bottom: 20px;">
							<div class="wrapdetail"
								style="background-color: #eeeeee; width: 100%; height: auto;">
								<div class="col-md-12"
									style="padding-left: 0px !important; padding-right: 0px !important; background-color: white; padding-top: 15px;">
									<div class="col-md-12 "
										style="padding-left: 0px !important; padding-right: 0px !important;">
										<div class="row">
											<!--COT 1 -->
											<div class="col-md-3">
												<div class="row">
													<div class="col-md-6 pdright3">
														<label>Số chứng từ<span style="color: red;">*</span></label>
														<p:inputText
															value="#{invoiceBean.invoiceCrud.voucher_code}"
															style="width:100%;" />
													</div>
													<div class="col-md-6 pdnone">
														<label>ID</label>
														<p:inputText disabled="true"
															value="#{invoiceBean.invoiceCrud.id}" style="width:100%;" />

														<div class="row" style="margin-top: 10px;">
															<p:outputLabel for="voucherCode2Input"
																value="Số chứng từ C2:" style="margin-right:10px;" />
															<p:inputText id="voucherCode2Input"
																value="#{doiChieuBean.voucherCode2Input}"
																style="width:200px;" />

															<p:commandButton value="Lưu số chứng từ C2"
																action="#{doiChieuBean.saveHoaDonC2}" process="@form"
																update="messages" styleClass="btn_primmary"
																icon="fa fa-floppy-o" />
														</div>


													</div>
												</div>
											</div>
										</div>
									</div>
								</div>
							</div>
						</h:panelGroup>
					</p:tab>
				</p:tabView>
			</h:form>
		</div>

	</ui:define>
</ui:composition>