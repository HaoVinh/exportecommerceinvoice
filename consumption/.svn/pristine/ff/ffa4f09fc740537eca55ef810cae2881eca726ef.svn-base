<?xml version="1.0" encoding="UTF-8"?>
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:p="http://primefaces.org/ui"
	xmlns:pe="http://primefaces.org/ui/extensions"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:c="http://java.sun.com/jsp/jstl/core"
	xmlns:fn="http://java.sun.com/jsp/jstl/functions"
	xmlns:h="http://java.sun.com/jsf/html" template="/pages/home.xhtml">
	<ui:define name="content">
		<style>
.ui-selectoneradio label {
	font-weight: normal;
}
</style>
		<h3
			style="margin: 0px; color: #00145a; font-weight: bold; font-size: 15px !important; line-height: 13px; padding-top: 10px; padding-left: 10px;">In
			sản phẩm theo khách hàng</h3>
		<p:separator />
		<div class="col-md-8" style="float: none; margin: auto;">
			<p:fieldset>
				<h:form id="menuformid">
					<div class="col-md-12">
						<p:fieldset>
							<div class="col-md-12"
								style="padding-left: 0px !important; padding-right: 0px !important;">
								<div class="row">
									<div class="divfixwidth"
										style="width: 380px; margin-left: 10px;">
										<div style="width: 230px; float: left">
											<p:outputPanel id="sedate"
												rendered="#{inSanPhamTheoKHBean.rdtungaydenngay}">
												<label style="width: 80px">Từ ngày</label>
												<p:calendar value="#{inSanPhamTheoKHBean.startDate}"
													styleClass="ui-calendarw100" pattern="dd/MM/yyyy"
													showOn="button" mask="99/99/9999" showButtonPanel="true">
												</p:calendar>
												<br />
												<label style="width: 80px">Đến ngày</label>
												<p:calendar value="#{inSanPhamTheoKHBean.endDate}"
													styleClass="ui-calendarw100" pattern="dd/MM/yyyy"
													showOn="button" mask="99/99/9999" showButtonPanel="true">
												</p:calendar>
											</p:outputPanel>
										</div>
										<div style="width: 150px; float: right">
											<p:outputPanel rendered="#{inSanPhamTheoKHBean.rdthangnam}">
												<label style="width: 60px">Tháng</label>
												<p:spinner value="#{inSanPhamTheoKHBean.month}" size="3"
													min="1" max="12">
													<p:ajax listener="#{inSanPhamTheoKHBean.ajax_setDate()}"
														update="sedate" process="@this" />
												</p:spinner>
												<br />
												<label style="width: 60px">Năm</label>

												<p:spinner value="#{inSanPhamTheoKHBean.year}" size="3"  thousandSeparator=""
													min="2015" max="2050">
													<p:ajax listener="#{inSanPhamTheoKHBean.ajax_setDate()}"
														update="sedate" process="@this" />
												</p:spinner>
											</p:outputPanel>
										</div>
									</div>
									<div class="row" style="clear: both; margin-top: 80px">
									<div class="col-sm-6">
											<label>Thành phố</label>
											<div class="nhapdlg">
												<span class="fa fa-search"></span>
												<p:autoComplete style="width:100%;"
													value="#{inSanPhamTheoKHBean.city}" maxResults="50"
													converter="abstractConverter" minQueryLength="3"
													queryDelay="900" dropdown="true"
													completeMethod="#{abstractAutoComplete.completeCity}"
													var="p" itemLabel="#{p.city_name}" itemValue="#{p}"
													forceSelection="true" onclick="this.select();">
													<p:ajax event="itemSelect"
														listener="#{inSanPhamTheoKHBean.ajaxLocKH()}"
														update="pkkh" />
													<p:column style="width:20px">
														<h:outputText value="#{p.id}" />
													</p:column>
													<p:column style="width:50px">
														<h:outputText value="#{p.city_code}" />
													</p:column>
													<p:column style="width:150px">
														<h:outputText value="#{p.city_name}" />
													</p:column>
												</p:autoComplete>
											</div>
										</div>
										<div class="col-sm-6">
											<label>Loại khách hàng</label>
											<div class="nhapdlg">
												<span class="fa fa-search"></span>
												<p:autoComplete style="width:100%;"
													value="#{inSanPhamTheoKHBean.customerTypes}"
													converter="abstractConverter"
													minQueryLength="3" queryDelay="900" dropdown="true"
													completeMethod="#{abstractAutoComplete.completeCustomerTypes}"
													var="p" itemLabel="#{p.name}" itemValue="#{p}"
													forceSelection="true" onclick="this.select();">
													<p:ajax event="itemSelect"
														listener="#{inSanPhamTheoKHBean.ajaxLocKH()}"
														update="pkkh" />
													<p:column style="width:20px">
														<h:outputText value="#{p.id}" />
													</p:column>
													<p:column style="width:50px">
														<h:outputText value="#{p.code}" />
													</p:column>
													<p:column style="width:150px">
														<h:outputText value="#{p.name}" />
													</p:column>
												</p:autoComplete>
											</div>
										</div>
									</div>
									<div class="row" style="padding: 10px">
										<p:pickList value="#{inSanPhamTheoKHBean.dualCustomers}"
											var="emp" itemValue="#{emp}" id="pkkh"
											itemLabel="#{emp.customer_name}"
											responsive="true" showSourceFilter="true" 
											showTargetFilter="true" filterMatchMode="contains"
											converter="pickListConverter">
											<p:column style="width:100%">
												<h:outputText value="#{emp.customer_code}"
													style="font-weight:bold" />
												<br />
												<h:outputText value="#{emp.customer_name}" />
											</p:column>
											<p:ajax event="transfer" update="@this" />
											<f:facet name="sourceCaption">Danh sách KH</f:facet>
											<f:facet name="targetCaption">Danh sách KH được chọn</f:facet>
										</p:pickList>
									</div>
									<div class="row">
										<div class="col-sm-6">
											<label>Loại sản phẩm</label>
											<div class="nhapdlg">
												<span class="fa fa-search"></span>
												<p:autoComplete style="width:100%;"
													disabled="#{!inSanPhamTheoKHBean.bloaisanpham}"
													value="#{inSanPhamTheoKHBean.productType}" maxResults="20"
													converter="abstractConverter" minQueryLength="3"
													queryDelay="900" dropdown="true"
													completeMethod="#{abstractAutoComplete.completeProductTypes}"
													var="p" itemLabel="#{p.name}" itemValue="#{p}"
													forceSelection="true" onclick="this.select();">
													<p:column style="width:50px">
														<h:outputText value="#{p.code}" />
													</p:column>
													<p:column style="width:150px">
														<h:outputText value="#{p.name}" />
													</p:column>
												</p:autoComplete>
											</div>
										</div>
										<div class="col-sm-6">
											<label>Nhóm sp brand</label>
											<div class="nhapdlg">
												<span class="fa fa-search"></span>
												<p:autoComplete style="width:100%;"
													value="#{inSanPhamTheoKHBean.productBrand}"
													maxResults="100" converter="abstractConverter"
													minQueryLength="3" queryDelay="900" dropdown="true"
													completeMethod="#{abstractAutoComplete.completeProductBrand}"
													var="p" itemLabel="#{p.pbrand_name}" itemValue="#{p}"
													moreText="true" forceSelection="true"
													onclick="this.select();">
													<p:column style="width:50px">
														<h:outputText value="#{p.pbrand_code}" />
													</p:column>
													<p:column>
														<h:outputText value="#{p.pbrand_name}" />
													</p:column>
												</p:autoComplete>
											</div>
										</div>

									</div>
									<div class="row">
										<div class="col-sm-6">
											<label>Loại nhập xuất</label>
											<div class="nhapdlg">
												<span class="fa fa-search"></span>
												<p:autoComplete style="width:100%;"
													value="#{inSanPhamTheoKHBean.ieCategories}"
													maxResults="100" converter="abstractConverter"
													minQueryLength="3" queryDelay="900" dropdown="true"
													completeMethod="#{abstractAutoComplete.completeIECategories}"
													var="p" itemLabel="#{p.code}" itemValue="#{p}"
													moreText="true" forceSelection="true"
													onclick="this.select();">
													<p:column style="width:50px">
														<h:outputText value="#{p.code}" />
													</p:column>
													<p:column>
														<h:outputText value="#{p.content}" />
													</p:column>
												</p:autoComplete>
											</div>
										</div>
										<div class="col-sm-6">
											<p:selectBooleanCheckbox style="margin-top:30px"
												value="#{inSanPhamTheoKHBean.xuatexcel}"
												itemLabel="Xuất excel" />
										</div>
									</div>
								</div>
							</div>
						</p:fieldset>
					</div>
					<div class="col-md-12" style="margin-top: 20px">
						<p:fieldset>
							<p:selectOneRadio columns="3"
								value="#{inSanPhamTheoKHBean.baocaoSelect}"
								converter="abstractConverter" layout="responsive">
								<f:selectItems itemDisabled="#{item.disable}"
									value="#{inSanPhamTheoKHBean.listLoaiBaoCaoInSanPham}"
									var="item" itemLabel="#{item.name}" itemValue="#{item}" />
								<p:ajax process="@this"
									listener="#{inSanPhamTheoKHBean.ajaxChonBaoCao()}"
									update="menuformid" />
							</p:selectOneRadio>
						</p:fieldset>
					</div>
					<br />
					<div class="col-md-12" style="text-align: center">
						<p:commandButton
							actionListener="#{inSanPhamTheoKHBean.thuchienbaocao()}"
							update=":messages" value="Thực hiện báo cáo(excel)"
							target="_blank" ajax="false" />
					</div>
				</h:form>
			</p:fieldset>
		</div>
		<p:dialog styleClass="dialogcommon dialogcommon_size90"
			maximizable="true" minimizable="true" resizable="false"
			closeOnEscape="true" header="Nội dung báo cáo" widgetVar="showImg">
			<h:form id="showImg">
				<div id="example1"
					style="width: 98%; height: 98%; border: 1px solid #cccccc; position: absolute; z-index: 1000; float: right;"></div>
			</h:form>
		</p:dialog>

	</ui:define>
</ui:composition>